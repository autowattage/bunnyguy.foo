@use 'sass:math';
@import 'varsindex';
@import 'colors';

header {
  height: var(--header-height);
  img { clip-path: polygon(
    0 0, 100% 0, 100% 100%,
    calc(100% - var(--header-offset)) 100%,
    calc(100% - var(--mp3-height) - var(--padding) - var(--header-offset)) calc(100% - var(--mp3-height) - var(--padding)),
    0 calc(100% - var(--mp3-height) - var(--padding)));
  }
  aside {
    position: relative; bottom: var(--mp3-height); margin-left: var(--padding);
    height: var(--mp3-height); width: calc(100% - var(--header-offset));
    clip-path: polygon(
      0 0,
      calc(100% - var(--mp3-height) - var(--padding)*2.5) 0,
      calc(100% - var(--padding)*2.5) 100%,
      0 100%);
    display: flex; gap: var(--padding);
    button {
      aspect-ratio: 1/1; border: 0;
      svg {height: 100%; color: $black; width: calc(var(--padding)*3.5);}
      &:nth-child(1) {background-color: $blue;}
      &:nth-child(2) {background-color: $yellow;}
      &:nth-child(3) {background-color: $green;}
    }
    marquee {
      background-color: $black; color: $white;
      align-content: center;
      flex-grow: 1; text-wrap:nowrap;
    }
  }
  h1 {
    margin: 0; color: $white; font-size: var(--h1size);
    position: absolute; top: calc(var(--header-height) - var(--h1size) - var(--mp3-height) - var(--padding) * 2); left: .25rem;
  }
}

main {
  display: flex; flex-direction: column; width: 100%;
  background-color: $black; color: $white; gap: var(--padding);
  >div {
    display: flex; flex-direction: column; gap: var(--padding);
    >section {width: 100%; margin: auto;}
    &:nth-child(odd) {background-color: $white; color: $black; padding: var(--padding) 0;}
  }

  #landing {
    display: flex;
    > a {
      background-color: $red; flex-grow: 1; margin-right: calc(var(--padding) * 1.25 - var(--landing-gap));
      clip-path: polygon(0 0, 0 100%, calc(100% - var(--landing-gap)) 100%, 100% 0);
    }
    nav {
      display: flex; flex-direction: column;
      text-align: right;
      width: var(--sitenav-width);
      clip-path: polygon(var(--landing-gap) 0, 0 100%, 100% 100%, 100% 0);
      a {
        padding: calc(var(--padding) * 1.5); color: $black; position: relative;
        &:nth-child(1) {background-color: $yellow;}
        &:nth-child(2) {background-color: $green;}
        &:nth-child(3) {background-color: $blue;}
      }
    }
  }

  #art {
    display: flex; flex-direction: column; gap: var(--padding);
    .imggallery img {height: 10rem;}
   }

  #blog {
    display: flex; gap: calc(var(--padding) * 2); flex-direction: column;
    justify-content: center; width: 90%;
    nav {
      transform: skew(5deg);
      display: flex; gap: calc(var(--padding) * 2);
      margin-left: var(--padding); flex-wrap: wrap;
      a {
        position: relative;
        flex-basis: 42%; flex-grow: 1; color: $black;
        background-color: $green; padding: var(--padding);
        box-shadow: calc(var(--padding)*-1) var(--padding) $blue;
        &:nth-child(1) {
          background-color: $yellow;
          box-shadow: calc(var(--padding)*-1) var(--padding) $green;
          &::after, &::before {background-color: $green;}
        }
        &:nth-child(3) {
          background-color: $blue;
          box-shadow: calc(var(--padding)*-1) var(--padding) $purple;
          &::after, &::before {background-color: $purple;}
        }
      }
      
      a::before, a::after {
        content:""; display: block; position: absolute;
        background-color: $blue;
      }
      a::before {
        left: calc(var(--padding) * -1); top: calc(var(--padding) / 2);
        width: var(--padding); height: 100%;
        transform: skew(0, -45deg);
      }
      a::after {
        right: calc(var(--padding) / 2); top:100%; 
        height: var(--padding); width: 100%;
        transform: skew(-45deg, 0);
      }
    }
    #statuscafe {
      transform: skew(5deg);
      background-color: $white; color: $black;
      padding: var(--padding) var(--padding) calc(var(--padding) * 3);
      clip-path: polygon(
        0 0,
        0 calc(100% - var(--padding)*2),
        calc(100% - var(--padding)*4) calc(100% - calc(var(--padding) * 2)),
        calc(100% - var(--padding)*3) 100%,
        calc(100% - var(--padding)*2) calc(100% - calc(var(--padding) * 2)),
        100% calc(100% - var(--padding)*2),
        100% 0
      )
    }
  }

  #code {
    display: flex; gap: var(--padding);
    flex-direction: column;
    .btnexpand { order: 2; }
    > div {
      display: flex; gap: var(--padding); flex-direction: column;
      img {flex-basis: 8rem;}
      .imggallery {min-height: 0; flex-basis: 10rem;}
    }
  }
  #personal {
    display: flex; flex-direction: column; gap: var(--padding); height: 15rem;
    h2 { font-size: calc(var(--h1size) - 2rem); text-align: center; margin: var(--padding); }
    > a {
      background-color: red; margin: 0;
      width: 100%; height: 100%;
    }
  }
}
#audioenable {
  position: fixed; top: 0; right: 0;
  width: calc(var(--mp3-height) + var(--padding) * 2.5); aspect-ratio: 1/1; border: none;
  clip-path: polygon(0 0, 100% 0, 100% 100%); background-color: $white;
  svg {
    position: absolute; top: calc(var(--padding)); right: calc(var(--padding));
    width: calc(var(--mp3-height) / 2); color: $blue;
  }
}

// Dark/light color modifications
@media (prefers-color-scheme: dark) {
  header aside marquee, footer { background-color: $white; color: $black;}
  main>div:nth-child(odd) {background-color: $black; color: $white;}
}

// Tablet view
@media screen and (min-width: 25rem) {
  main {
    #landing {
      > a { 
        clip-path: polygon(0 0, 0 100%, calc(100% - var(--landing-gap)*2) 100%, 100% 0);
        margin-right: calc(var(--landing-gap) * -2 + var(--padding) * 1.25);
      }
      nav {
        width: calc(var(--sitenav-width) + var(--landing-gap)/2);
        clip-path: polygon(calc(var(--landing-gap) * 2) 0, 0 100%, 100% 100%, 100% 0);
      }
    }
    #art {
      .imggallery img {height: 12rem;}
    }
    #blog {
      flex-direction: row; gap: var(--padding); padding-bottom: var(--padding);
      #statuscafe { flex-basis: 55%; flex-shrink: 0; }
    }
    #personal {
      display: grid; grid-gap: var(--padding); height: 15rem;
      grid: auto 1fr / 1fr 1.75fr 1fr;
      h2 {margin: var(--padding) 0; grid-area: 1/2/1/2;}
      > a {
        background-color: red; margin: 0;
        width: 100%; height: 100%;
      }
      a {
        &:nth-child(2) {grid-area: 1/1/span 2/2;}
        &:nth-child(3) {grid-area: 2/2/2/2;}
        &:nth-child(4) {grid-area: 1/3/span 2/3;}
      }
    }
  }
}
// Desktop view
@media screen and (min-width: 40rem) {
  header {
    img { clip-path: polygon(
      0 0, 100% 0, 100% 100%,
      calc(100% - (100% - var(--desktopwidth))/2 - var(--header-offset)) 100%,
      calc(100% - (100% - var(--desktopwidth))/2 - var(--header-offset) - var(--mp3-height) - var(--padding)) calc(100% - var(--mp3-height) - var(--padding)),
      0 calc(100%  - var(--mp3-height) - var(--padding)),
      );
    }
    aside {
      width: calc(var(--desktopwidth) - var(--header-offset) + var(--padding));
      left: calc((100% - var(--desktopwidth))/2 - var(--padding));
      button svg { width: calc(100% - var(--padding)); }
    }
  }
  main {
    >div>section {width: var(--desktopwidth);}
    #landing {
      nav>a {
        padding: calc(var(--padding) * 2); color: $black;
        @keyframes landhover1 { 0% {width: 0; opacity: 75%;} 100% {width: 90%; opacity: 0;}} 
        @keyframes landhover2 { 0% {width: 0; opacity: 75%;} 100% {width: 102%; opacity: 0;}} 
        @keyframes landhover3 { 0% {width: 0; opacity: 75%;} 100% {width: 115%; opacity: 0;}}
        &::before {
          content:""; display: block; position: absolute; right: 0; top: 0;
          background-color: $green; height: 100%; width: 0;
          clip-path: polygon( 2rem 0, 100% 0, 100% 100%, 2rem 100%, 0 50%);
        }
        &:nth-child(2)::before {background-color: $blue;}
        &:nth-child(3)::before {background-color: $purple;}
        &:hover::before {animation: landhover1 3s cubic-bezier(0.05, 0.75, 0.1, 1);}
        &:nth-child(2):hover::before {animation-name: landhover2;}
        &:nth-child(3):hover::before {animation-name: landhover3;}
      }
    }
    #art .imggallery img {height: 15rem;}
    #blog {
      width: calc(var(--desktopwidth) - var(--padding)*2);
      nav {
        a:hover {
          right: calc(var(--padding) / 3);
          top: calc(var(--padding) / 3);
          box-shadow: calc(var(--padding)*-1/1.5) calc(var(--padding)/1.5) $blue;
          &:nth-child(1) { box-shadow: calc(var(--padding)*-1/1.5) calc(var(--padding)/1.5) $green;}
          &:nth-child(3) { box-shadow: calc(var(--padding)*-1/1.5) calc(var(--padding)/1.5) $purple;}
          &::before {
            width: calc(var(--padding) / 1.5);
            left: calc(var(--padding) / -1.5); top: calc(var(--padding) / 3);
          }
          &::after {
            height: calc(var(--padding) / 1.5);
            top: 100%; left: calc(var(--padding) / -3);
          }
        }
        a:active {
          right: calc(var(--padding) / 2);
          top: calc(var(--padding) / 2);
          box-shadow: calc(var(--padding)*-.5) calc(var(--padding)/2) $blue;
          &:nth-child(1) { box-shadow: calc(var(--padding)*-.5) calc(var(--padding)/2) $green;}
          &:nth-child(3) { box-shadow: calc(var(--padding)*-.5) calc(var(--padding)/2) $purple;}
          &::before {
            width: calc(var(--padding) / 2);
            left: calc(var(--padding) / -2); top: calc(var(--padding) / 4);
          }
          &::after {
            height: calc(var(--padding) / 2);
            top: 100%; left: calc(var(--padding) / -4);
          }
        }
      }
    }
    #code {
      flex-direction: row-reverse; height: 25rem;
      .btnexpand {
        flex-direction: column; flex-shrink: 0;
        height: 100%; flex-basis: 7rem; justify-content: flex-start;
        a:hover {
          padding: calc(var(--padding)*4) calc(var(--padding)*2);
        }
      }
      > img { flex-basis: 15rem;}
      .imggallery {flex-grow: 1;} 
    }
    #personal h2 { font-size: calc(var(--h1size) - 3rem);}
  }
}
// Desktop extended view
@media screen and (min-width: 55rem) {
  main {
    #landing {
      nav {
        width: calc(var(--sitenav-width) + var(--landing-gap)/1.5);
        a {padding: calc(var(--padding) * 3); color: $black;}
      }
    }
  }
}
